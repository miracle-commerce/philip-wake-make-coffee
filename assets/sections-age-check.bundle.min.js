/*! js-cookie v3.0.1 | MIT */
function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var t=function t(n,r){function i(t,i,o){if("undefined"!=typeof document){"number"==typeof(o=e({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in o)o[a]&&(s+="; "+a,!0!==o[a]&&(s+="="+o[a].split(";")[0]));return document.cookie=t+"="+n.write(i,t)+s}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},i=0;i<t.length;i++){var o=t[i].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(r[a]=n.read(s,a),e===a)break}catch(e){}}return e?r[e]:r}},remove:function(t,n){i(t,"",e({},n,{expires:-1}))},withAttributes:function(n){return t(this.converter,e({},this.attributes,n))},withConverter:function(n){return t(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});window.ThemeSection_AgeCheck=e=>({authenticated:!1,mode:e.mode,date_format:e.date_format,minimum_age:e.minimum_age,redirect_url:e.redirect_url,month:"",day:"",year:"",date:"",cookie:t.get("ageGateAuthenticated"),isSelected:!1,get fullDate(){return`${this.month}/${this.day}/${this.year}`},mounted(){initTeleport(this.$root),Alpine.store("modals").register("ageCheck","modal"),"true"!==this.cookie&&Alpine.store("modals").open("ageCheck"),null===this.redirect_url&&(this.redirect_url="https://www.google.com"),"dob"===this.mode&&(this.date=new Date,setTimeout((()=>this.setUpDOB()),100)),document.addEventListener("shopify:section:select",(e=>{e.target.querySelector('[data-section="age-check"]')&&this.showSectionInThemeEditor()})),Shopify.designMode&&this.isSelected&&this.showSectionInThemeEditor()},showSectionInThemeEditor(){this.isSelected=!0,Alpine.store("modals").open("ageCheck")},approveEntry(){Alpine.store("modals").close("ageCheck"),this.isSelected?t.remove("ageGateAuthenticated"):t.set("ageGateAuthenticated","true",{expires:30})},denyEntry(){window.location=this.redirect_url},checkInput(e){switch(e){case"day":return parseInt(this.day)>0&&parseInt(this.day)<32;case"month":return parseInt(this.month)>0&&parseInt(this.month)<13;case"year":return parseInt(this.year)<this.date.getFullYear()&&parseInt(this.year)>1900}return!0},checkAge(){const e=Math.round(this.date.getTime()/1e3),t=Math.round(new Date(`${this.fullDate}`).getTime()/1e3);Math.floor((e-t)/31536e3)>parseInt(this.minimum_age,10)?this.approveEntry():this.denyEntry()},setUpDOB(){document.getElementById("dob-form").addEventListener("input",(e=>{const t=e.srcElement||e.target,n=parseInt(t.attributes.maxlength.value,10),r=t.value.length;if(r>=n){if(!this.checkInput(t.getAttribute("name")))return t.value="",!1;let e=t.closest(".input-grid-item");for(;(e=e.nextElementSibling)&&null!=e;){let t=e.querySelector("input");if(null!==t){t.focus();break}}}else if(0===r){let e=t.closest(".input-grid-item");for(;(e=e.previousElementSibling)&&null!=e;){const t=e.querySelector("input");if(null!==t){t.focus();break}}}this.checkInput("day")&&this.checkInput("month")&&this.checkInput("year")&&setTimeout((()=>this.checkAge()),500)}))}});
