import{L as e}from"./shared-import-index.bundle.min.js";window.ThemeModule_Video=(t,i,s,a)=>({enabled:!1,shown:!1,id:t,type:i,host:s,youtubeReady:!1,productMediaWrapper:null,ytPlayer:null,vimeoPlayer:null,autoPlayOnDesktop:a,playing:!1,init(){this.$watch("enabled",(e=>{this.$nextTick((()=>{this.shown=e}))})),document.addEventListener("touchstart",(function(){window.setTouch()})),document.body.addEventListener("pauseAllMedia",(e=>{null!==e.detail?e.detail.id!==this.id&&this.pause():this.pause()})),"youtube"===this.host&&(document.body.addEventListener("youtubeiframeapiready",(()=>{this.youtubeReady=!0})),e.load("youtubeSdk")),"vimeo"===this.host&&e.load("vimeoSdk"),this.productMediaWrapper=this.$root.closest("[data-product-single-media-wrapper]"),null!==this.productMediaWrapper&&this.setUpProductMediaListeners()},enableVideo(){this.enabled=!0;let e=this.$root;this.$nextTick((()=>{if("video"===this.type){e.querySelector(".video").onplay=()=>{this.playing=!0,this.dispatchPauseEvent()}}else{if("youtube"===this.host){const t=e.querySelector(".js-youtube");this.ytPlayer=new YT.Player(t,{events:{onStateChange:function(e){1===e.data&&(this.playing=!0,this.dispatchPauseEvent())}.bind(this)}})}if("vimeo"===this.host){const t=e.querySelector(".js-vimeo");this.vmPlayer=new Vimeo.Player(t),Alpine.raw(this.vmPlayer).on("play",(()=>{this.playing=!0,this.dispatchPauseEvent()}))}}}))},dispatchPauseEvent(){document.body.dispatchEvent(new CustomEvent("pauseAllMedia",{detail:{id:this.id}}))},pause(){if(!this.enabled)return!1;if("video"===this.type)this.$root.querySelector("video").pause();else switch(this.host){case"youtube":this.ytPlayer.pauseVideo();break;case"vimeo":Alpine.raw(this.vmPlayer).pause()}this.playing=!1},play(){if(!this.enabled)return!1;if("video"===this.type)this.$root.querySelector("video").play();else switch(this.host){case"youtube":this.ytPlayer.playVideo();break;case"vimeo":Alpine.raw(this.vmPlayer).play()}this.playing=!0,this.dispatchPauseEvent()},setUpProductMediaListeners(){this.productMediaWrapper.addEventListener("mediaHidden",(()=>{this.pause()})),this.productMediaWrapper.addEventListener("xrLaunch",(()=>{this.pause()})),this.productMediaWrapper.addEventListener("mediaVisible",(()=>{window.isTouch()||(!this.enabled&&this.autoPlayOnDesktop?this.enableVideo():this.play())}))}});
