{% comment %}theme-check-disable TemplateLength{% endcomment %}
{%- liquid
  assign color_scheme = section.settings.color_scheme | default: 'primary'
  assign layout = section.settings.header_layout
  assign uppercase = settings.header_uppercase
  assign base_font_class = settings.header_font
  assign dropdown_bg = section.settings.dropdown_bg
  assign crop = section.settings.crop
  assign predictive_search_enabled = true
  assign counter = 0
  assign show_icons = section.settings.show_icons

  if section.settings.transparent_when_overlaid_and_stuck
    assign change_color_scheme_when_overlaid_and_stuck = false
  else
    assign change_color_scheme_when_overlaid_and_stuck = true
  endif

  if section.settings.enable_overlay_on_homepage and template == 'index'
    assign enable_overlay = true
  endif
  if section.settings.enable_overlay_on_collection_pages and template contains 'collection' and template != 'list-collections'
    assign enable_overlay = true
  endif
  if section.settings.enable_overlay_on_product_pages and template contains 'product'
    assign enable_overlay = true
  endif
  if section.settings.overlay_text_color != 'same_as_section' and enable_overlay
  assign color_scheme = section.settings.overlay_text_color

  if change_color_scheme_when_overlaid_and_stuck
    assign stuck_color_scheme = section.settings.color_scheme
  endif

  endif
  assign has_feature_desktop_button = false
  if section.blocks.size == 1
    assign has_feature_desktop_button = true
  endif
  case dropdown_bg
    when 'card'
      assign dropdown_background = 'bg-scheme-card'
      assign dropdown_text = 'text-scheme-text'
    when 'text'
      assign dropdown_background = 'bg-scheme-text'
      assign dropdown_text = 'text-scheme-background'
    when 'accent-1'
      assign dropdown_background = 'bg-scheme-accent-1'
      assign dropdown_text = 'text-scheme-accent-1-overlay'
    when 'accent-1'
      assign dropdown_background = 'bg-scheme-accent-1'
      assign dropdown_text = 'text-scheme-accent-1-overlay'
  endcase
  assign predictive_search_enabled = settings.predictive_search_enabled
-%}
{%- capture logo -%}
  {%- assign class = 'font-heading text-xl lg:text-3xl py-2.5' -%}
  {%- if template == 'index' -%}
    <h1 class="h1 font-heading {{ class }}">
  {%- else -%}
    <div class="h1 font-heading {{ class }}">
  {%- endif -%}
    {% if section.settings.logo != blank %}
      {% liquid
        if section.settings.overlay_logo != blank and enable_overlay
          assign logo = section.settings.overlay_logo
          if change_color_scheme_when_overlaid_and_stuck
            assign switch_between_both_logos = true
          endif
        else
          assign logo = section.settings.logo
        endif

        assign image_size = section.settings.logo_max_width
        assign image_size_2x = section.settings.logo_max_width | times: 2
        assign image_size_3x = section.settings.logo_max_width | times: 3
      %}
      <a href="{{ routes.root_url }}" class="site-header__logo-link inline w-full">
        <div {% if switch_between_both_logos %} class="relative" {% endif %} style="max-width: {{ section.settings.logo_max_width }}px;">
          <img
            src="{{ logo | image_url: width: image_size }}"
            srcset="
              {{- logo | image_url: width: image_size | append: ' 1x,' -}}
              {{- logo | image_url: width: image_size_2x | append: ' 2x,' -}}
              {{- logo | image_url: width: image_size_3x | append: ' 3x' -}}
            "
            alt="{{ shop.name }}"
            width="{{ logo.width }}"
            height="{{ logo.height }}"
            loading="eager"
            {% if switch_between_both_logos %}
              class="transition-opacity text-transparent"
              :class="{ 'opacity-100' : !isStuck, 'opacity-0' : isStuck }"
            {% else %}
              class="text-transparent"
            {% endif %}
          >
          {% if switch_between_both_logos %}
            {% assign non_overlay_logo = section.settings.logo %}
            <img
              src="{{ non_overlay_logo | image_url: width: image_size_2x }}"
              srcset="
              {{- non_overlay_logo | image_url: width: image_size | append: ' 1x,' -}}
              {{- non_overlay_logo | image_url: width: image_size_2x | append: ' 2x,' -}}
              {{- non_overlay_logo | image_url: width: image_size_3x | append: ' 3x' -}}
              "
              alt="{{ shop.name }}"
              width="{{ non_overlay_logo.width }}"
              height="{{ non_overlay_logo.height }}"
              class="absolute inset-0 w-full h-full text-transparent transition-opacity"
              :class="{ 'opacity-0' : !isStuck, 'opacity-100' : isStuck }"
              loading="eager"
              x-cloak
            >
          {% endif %}
        </div>
      </a>
    {% else %}
      <a href="{{ routes.root_url }}" class="block max-w-[12rem] sm:max-w-md lg:max-w-2xl xl:max-w-none break-words mx-auto">{{ shop.name }}</a>
    {% endif %}
  {%- if template == 'index' -%}
    </h1>
  {%- else -%}
    </div>
  {%- endif -%}
{%- endcapture -%}


{%- if has_feature_desktop_button %}
  {%- capture feature_desktop_link -%}
    {%- for block in section.blocks -%}
    {%- liquid
      assign feature_desktop_link_position = block.settings.position
      assign hide_button_shadow = false
      if block.settings.hide_button_shadow
        assign hide_button_shadow = true
      endif
    -%}
    <a href="{{ block.settings.button_link }}" class="push-btn push-btn--pop inline-block {% if block.settings.hide_button_shadow %}push-btn--no-shadow{% endif %}">
      <span class="push-btn-surface">{{ block.settings.button_label }}</span>
    </a>
    {%- endfor -%}
  {%- endcapture -%}
{% endif %}

{%- liquid
  assign link_all = section.settings.show_all_navigation_links
  assign link_classes = base_font_class | append: ' px-2.5 py-5 flex items-center transition'
  assign secondary_link_classes = 'inline-block font-body px-5 py-1'
  assign tertiary_link_classes = 'inline-block font-body px-5 py-1 max-w-full break-words'
  if uppercase
    assign base_font_class = base_font_class | append: ' uppercase'
    assign link_classes = link_classes | append: ' uppercase'
    assign secondary_link_classes = secondary_link_classes | append: ' uppercase'
    assign tertiary_link_classes = tertiary_link_classes | append: ' uppercase'
  else
    assign base_font_class = base_font_class | append: ' normal-case'
    assign link_classes = link_classes | append: ' normal-case'
    assign tertiary_link_classes = tertiary_link_classes | append: ' normal-case'
  endif
  if show_icons
    assign icon_link_classes = base_font_class | append: ' px-2.5 py-1 h-full flex items-center'
  endif
  assign show_collection_images = section.settings.show_collection_images
  assign showcase_second_level_links = section.settings.showcase_second_level_links
  assign showcase_first_level_collections = section.settings.showcase_first_level_collections
-%}
{% capture navigation %}
  <nav role="navigation">
    <ul  x-ref="navigation" class="flex flex-wrap -mx-2.5 {% if layout contains 'navigation_left' %}justify-start{% else %}justify-center{% endif %} items-center text-base {% if uppercase %}uppercase{% endif %} ">
      {%- if has_feature_desktop_button and feature_desktop_link_position == 'first_item_in_navigation' %}
      <li class="inline-block no-js-focus-wrapper h-full flex items-center relative z-10 px-2.5">
        <div class="{% unless hide_button_shadow %}{% if settings.button_shadow_direction contains 'top' %}pt-button-shadow{% else %}pb-button-shadow{% endif %}{% endunless %}">
          {{ feature_desktop_link }}
        </div>
      </li>
      {%- endif -%}
      {% for link in linklists[section.settings.main_linklist].links %}
        <li class="inline-block no-js-focus-wrapper h-full">
          {%- liquid
            assign is_feature_collection_link = false
            if link.links == blank and showcase_first_level_collections and link.type == 'collection_link'
              assign is_feature_collection_link = true
            endif
          -%}
          {% if link.links != blank or is_feature_collection_link %}
            <button class="items-stretch h-full relative {{ link_classes }}"
              :class="{'{{ dropdown_text }}': menuOpen.menu{{ counter }} }"
              @click="openMenu({{ counter }})"
              x-bind:aria-expanded="menuOpen.menu{{ counter }}? true: 'false'"
              aria-controls="menu{{ counter }}">
              <span x-cloak :class="{'opacity-100': menuOpen.menu{{ counter }}, 'opacity-0': !menuOpen.menu{{ counter }}, 'h-screen  -translate-y-1/2': !navWrapped }" class="{{ dropdown_background }} absolute inset-0 z-0 pointer-events-none" ></span>
              <span class="flex h-full items-center relative {% if layout contains 'navigation_center' %}text-center{% else %}text-left{% endif %}">
                <span class="inline-block pr-1">{{ link.title }}</span>
                <span class="inline-block w-2 h-2 align-middle svg-scale mr-1 transform origin-center rotate transition-transform duration-150 ml-1" :class="{'rotate-180': menuOpen.menu{{ counter }}}">{% render 'icon-chevron-down' %}</span>
              </span>
            </button>
            <div class="no-js-focus-container absolute left-0 bottom-0 w-full py-section-vertical-spacing px-section transform translate-y-[calc(100%-var(--drop-down-offset))] z-100 {% if layout contains 'navigation_center' %}text-center{% elsif layout contains 'navigation_right'%}text-right{% endif %} max-h-three-quarters-screen-height overflow-hidden overflow-y-auto {{ dropdown_background }} {{ dropdown_text }}"
                  id="menu{{ counter }}"
                  x-cloak
                  x-show="menuOpen.menu{{ counter }}"
                  x-transition:enter="transition ease duration-200"
                  x-transition:enter-start="opacity-0"
                  x-transition:enter-end="opacity-100"
                  x-transition:leave="transition ease duration-00"
                  x-transition:leave-start="opacity-100"
                  x-transition:leave-end="opacity-0"
                  data-header-dropdown
                  @focusout="focusOut($event, 'menu{{ counter }}')"
                  @click.away.prevent="menuOpen.menu{{ counter }} = false">

              {%- liquid
                assign counter = counter | plus: 1
                assign have_feature_links = false
                assign all_feature_links = false
                assign feature_link_count = 0
                assign single_level_links = link.links | where: "levels", 0
                assign product_links = single_level_links | where: "type", "product_link"
                assign collection_links = single_level_links | where: "type", "collection_link"
                assign feature_link_count = product_links.size | plus: collection_links.size
                if feature_link_count > 0
                  assign have_feature_links = true
                endif
                if feature_link_count == link.links.size
                  assign all_feature_links = true
                endif
                assign list_class = 'flex items-top justify-start -mx-5'
                assign col_class = 'px-5'
                assign use_grid = false
                if link.levels > 1
                  assign use_grid = true
                endif
                if feature_link_count > 0 and showcase_second_level_links == true
                  assign use_grid = true
                endif
                if collection_links.size > 0 and show_collection_images
                  assign use_grid = true
                endif
                if use_grid
                  assign list_class = 'grid grid-cols-1 lg:grid-cols-12 lg:gap-10 grid-flow-row-dense'
                  assign col_class = 'lg:col-span-2'
                endif
              %}
              {%- unless is_feature_collection_link %}
              <ul class="{{ list_class }} {% if layout contains 'navigation_center' %}text-center{% else %}text-left{% endif %}">

                {% comment %}theme-check-enable LiquidTag{% endcomment %}
                {% for child_link in link.links %}
                  {% liquid
                    assign is_feature_link = false
                    if child_link.type == 'product_link' or child_link.type == 'collection_link' and child_link.levels == 0
                      assign is_feature_link = true
                    endif
                  %}
                  {%- unless is_feature_link and showcase_second_level_links -%}
                    <li class="{{ col_class }} -mt-2">
                      {% if child_link.links != blank %}
                        {%- if child_link.type == 'collection_link' and show_collection_images -%}
                          <div class="-mt-2">
                            {%- assign object = child_link.object -%}
                            {% render 'showcase-tile' with object: object, crop: crop %}
                          </div>
                        {%- endif -%}
                        <h2 class="py-1 mb-2">
                          {% if link_all %}<a {% if child_link.active %}aria-current="page"{% endif %} class="inline-block py-1" href="{{ child_link.url }}" {% if child_link.active %}aria-current="page"{% endif %}>{% endif %}
                          {{ child_link.title }}
                          {% if link_all %}</a>{% endif %}
                        </h2>
                        <ul class="-mx-5 font-body text-base ">
                          {% for grandchild_link in child_link.links %}
                            <li>
                              <a {% if grandchild_link.active %}aria-current="page"{% endif %} href="{{ grandchild_link.url }}" class="{{ tertiary_link_classes }}">
                                {{ grandchild_link.title }}
                              </a>
                            </li>
                          {% endfor %}
                        </ul>
                      {% else %}
                        {%- if child_link.type == 'collection_link' and show_collection_images -%}
                          {%- assign object = child_link.object -%}
                          {% render 'showcase-tile' with object: object, crop: crop %}
                        {%- else -%}
                          <a {% if child_link.active %}aria-current="page"{% endif %} href="{{ child_link.url }}" class="-mx-5 text-base {{ secondary_link_classes }}">
                            {{ child_link.title }}
                          </a>
                        {%- endif -%}
                      {% endif %}
                    </li>
                  {%- endunless -%}
                {% endfor %}

                {% comment %}theme-check-disable LiquidTag{% endcomment %}
                {%- if have_feature_links and showcase_second_level_links -%}
                  {% assign features_mod = feature_link_count | modulo: 2 %}
                  {% for child_link in link.links %}
                      {%- if child_link.type == 'product_link' or child_link.type == 'collection_link' and child_link.levels == 0 -%}
                        {% if features_mod == 0 %}
                          {% capture cycle_class %}{% cycle "lg:col-end-11", "lg:col-end-13" %}{% endcapture %}
                        {% else %}
                          {% capture cycle_class %}{% cycle "lg:col-end-13", "lg:col-end-11" %}{% endcapture %}
                        {% endif %}
                        <li class="lg:col-span-2 {% unless all_feature_links %}{{ cycle_class }}{% endunless %} -mt-2">
                          {%- assign object = child_link.object -%}
                          {% render 'showcase-tile' with object: object, crop: crop %}
                        </li>
                      {%- endif -%}
                  {% endfor %}
                {%- endif -%}
                {% comment %}theme-check-enable LiquidTag{% endcomment %}
              </ul>
              {% else %}
                {%- render 'desktop-nav-featured-collection-links', link: link, crop: crop -%}
              {% endunless %}
            </div>
          {% else %}
            <a {% if link.active %}aria-current="page"{% endif %} href="{{ link.url }}" class="{{ link_classes }}">
              {{ link.title }}
            </a>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  </nav>
{% endcapture %}
{%- liquid
  assign search_resources = ''
  if settings.search_products
    assign search_resources = ' product'
  endif
  if settings.search_collections
    assign search_resources = search_resources | append: ' collection'
  endif
  if settings.search_articles
    assign search_resources = search_resources | append: ' article'
  endif
  if settings.search_pages
    assign search_resources = search_resources | append: ' page'
  endif
  if settings.search_suggestions
    assign search_resources = search_resources | append: ' query'
  endif
  assign search_resources = search_resources | strip | split: ' ' | join: ','
-%}
{% assign close_text = 'general.accessibility.close_modal' %}
{% if layout contains 'search' %}
  {% assign close_text = 'general.search.clear' %}
{% endif %}
{%- capture search_form -%}
  <form x-ref="searchForm" action="{{ routes.search_url }}" method="get" role="search" {% if predictive_search_enabled %} @submit="onFormSubmit"{% endif %} @click.away.prevent="searchOpen = false">
    <div x-ref="searchFieldComponent" class="relative py-2" {% unless predictive_search_enabled %}@focusout="searchFocusOut"{% endunless %}>
      <input
        id="header-search"
        type="search"
        name="q"
        value=""
        class="header-search-input pl-9 py-2 placeholder:text-scheme-text font-secondary w-full border-0 shadow-none bg-transparent"
        placeholder="{{ 'general.search.placeholder' | t }}"
        {%- if predictive_search_enabled -%}
          aria-expanded="false"
          aria-owns="predictive-search-results-list"
          aria-controls="predictive-search-results-list"
          aria-autocomplete="list"
          autocorrect="off"
          autocomplete="off"
          autocapitalize="off"
          spellcheck="false"
          x-ref="input"
          x-model="rawQuery"
          @input.debounce.300="onChange"
          @focus="onFocus"
        {%- endif -%}
      >
      <label class="visually-hidden" for="header-search">{{ 'general.search.placeholder' | t }}</label>
      <input type="hidden" name="options[prefix]" value="last">
      {%- if predictive_search_enabled == false and settings.search_products or settings.search_articles or settings.search_pages -%}
        <input type="hidden" name="type" value="{% if settings.search_products %}product{% endif %}{% if settings.search_articles %},article{% endif %}{% if settings.search_pages %},page{% endif %}">
      {%- endif -%}
      <button class="absolute left-0 top-1/2 transform -translate-y-1/2 p-1" aria-label="{{ 'general.search.submit' | t }}">
        <span class="inline-block w-6 h-6">{% render 'icon-search' %}</span>
      </button>
      <button x-cloak {% if predictive_search_enabled %}@click="close()"{% else %}@click="closeSearch()"{% endif %} class="block p-1 absolute right-0 top-1/2 transform -translate-y-1/2" type="button">
        <span class="visually-hidden">{{ close_text | t }}</span>
        <span class="inline-block w-6 h-6">{% render 'icon-close' %}</span>
      </button>
    </div>
    {%- if predictive_search_enabled -%}
    <div id="predictiveSearchResults" :class="{ 'opacity-0 bg-scheme-text/0': ! resultsOpen, 'bg-scheme-text/75' : resultsOpen }" tabindex="-1" x-cloak class="text-scheme-text absolute left-0 right-0 h-screen transition-colors ease-out duration-300 z-50">
      <template x-if="loading && !results">
        <div class="bg-scheme-background">
          <div class="w-6 h-6 pt-12 pb-12 mx-auto" data-predictive-loading>
            <div class="loading"></div>
          </div>
        </div>
      </template>
      <template x-if="resultsOpen">
        <div x-show="resultsOpen" class="max-h-three-quarters-screen-height overflow-hidden overflow-y-auto bg-scheme-background pb-5 lg:pb-10 px-section scroll-pb-5 lg:scroll-pb-10" x-ref="results" @click.away.prevent="searchOpen = false">
        </div>
      </template>
    </div>
    <span class="predictive-search-status visually-hidden" role="status" aria-hidden="true"></span>
    {%- endif -%}
  </form>
{%- endcapture -%}
{% comment %}
  Mobile menu icon.
  This is mandatory on mobile. On desktop only appears if menu icon layout is selected.
  {% endcomment %}
{%- capture menu_icon -%}
<button
  class="{{ base_font_class }} js-enabled inline-block -m-1 p-1 {% unless layout contains 'menu_icon' %}lg:hidden{% endunless %}"
  type="button"
  x-bind:aria-expanded="$store.modals.leftDrawer.contents === 'nav'"
  @click="$store.modals.open('nav')"
  data-menu-drawer-toggle>

  <span class="{% if show_icons %}visually-hidden{% endif %}">{{ 'layout.navigation.menu' | t }}</span>
  {%- if show_icons -%}
  <span class="block icon">
    <span class="w-6 h-6 inline-block align-middle">{% render 'icon-menu' %}</span>
  </span>
  {%- endif -%}
</button>
<noscript>
  <div class="no-js-focus-wrapper">
    <button
      class="inline-block -m-1 p-1 {% unless layout contains 'menu_icon' %}lg:hidden{% endunless %}"
      type="button"
      data-menu-drawer-toggle>
      <span class="{% if show_icons %}visually-hidden{% endif %}">{{ 'layout.navigation.menu' | t }}</span>
      {%- if show_icons -%}
      <span class="block icon">
        <span class="w-6 h-6 inline-block align-middle">{% render 'icon-menu' %}</span>
      </span>
      {%- endif -%}
    </button>
    <div class="hidden no-js-focus-container absolute left-0 bottom-0 w-11/12 md:w-7/12 lg:w-5/12 py-section-vertical-spacing px-section transform translate-y-[calc(100%-var(--section-border-thickness))] z-100 {% if layout contains 'navigation_center' %}text-center{% elsif layout contains 'navigation_right'%}text-right{% endif %} max-h-three-quarters-screen-height overflow-hidden overflow-y-auto {{ dropdown_background }}  {{ dropdown_text }}">
      {%- render 'no-js-sidebar-nav' %}
    </div>
  </div>
</noscript>
<div x-data>
  <div>
    {% render 'sidebar-nav', section: section, base_font_class: 'font-main' %}
  </div>
</div>
{%- endcapture -%}

{%- capture cart_icon %}
  {%- if show_icons -%}
    <div class="relative my-auto align-middle">
      <span class="inline-block w-6 h-6 fill-current align-top">
        {%- if settings.cart_icon == 'cart' -%}
          {%- render 'icon-cart' -%}
        {%- else -%}
          {%- render 'icon-bag' -%}
        {%- endif -%}
        <span class="visually-hidden">{{ 'layout.cart.title' | t }} </span>
      </span>
      {%- if cart != empty -%}
      <span x-show="$store.cart_count.count > 0" class="tracking-normal absolute -bottom-1.5 -right-1.5 w-5 h-5 bg-scheme-text text-scheme-background rounded-full text-[0.625rem] flex items-center justify-center" x-text="$store.cart_count.count">{{ cart.item_count }}</span>
      {%- endif -%}
      <span class="visually-hidden">
        {%- if cart.item_count == 1 -%}
          {{- 'layout.cart.items_count.one' | t -}}
        {%- else -%}
          {{- 'layout.cart.items_count.other' | t -}}
        {%- endif -%}
      </span>
    </div>
  {%- else -%}
    {{ 'layout.cart.title' | t }} (<span  x-text="$store.cart_count.count">{{ cart.item_count }}</span>)
    <span class="visually-hidden">
      {%- if cart.item_count == 1 -%}
        {{- 'layout.cart.items_count.one' | t -}}
      {%- else -%}
        {{- 'layout.cart.items_count.other' | t -}}
      {%- endif -%}
    </span>
  {%- endif -%}
{%- endcapture -%}

{%- capture cart_button -%}
  {% if settings.cart_type == 'modal' and template != 'cart' %}
    <button
      class="js-enabled whitespace-nowrap {% if show_icons %}{{ icon_link_classes }}{% else %}{{ link_classes }}{% endif %}"
      type="button"
      id="CartButton"
      @click.prevent="$store.modals.open('cart')"
      >
      {{ cart_icon }}
    </button>
    <noscript>
      <a
        class="whitespace-nowrap {{ link_classes }}"
        href="{{ routes.cart_url }}"
      >
        {{ cart_icon }}
      </a>
    </noscript>
  {% else %}
    <a
      class="whitespace-nowrap {{ link_classes }}"
      href="{{ routes.cart_url }}"
    >
      {{ cart_icon }}
    </a>
  {% endif %}
{%- endcapture -%}

{% comment %}
  Accounts
{% endcomment %}
{%- capture accounts -%}
  {% if shop.customer_accounts_enabled %}
    {% if customer %}
      <a class="{% if show_icons %}{{ icon_link_classes }}{% else %}{{ link_classes }}{% endif %}" href="{{ routes.account_url }}">
        <span class="{% if show_icons %}visually-hidden{% endif %}">{{ 'layout.customer.account' | t }}</span>
        {%- if show_icons -%}
        <span class="inline-block w-6 h-6 align-middle">{%- render 'icon-account' -%}</span>
      {%- endif -%}
      </a>
    {% else %}
      <a class="{% if show_icons %}{{ icon_link_classes }}{% else %}{{ link_classes }}{% endif %}" href="{{ routes.account_login_url }}">
        <span class="{% if show_icons %}visually-hidden{% endif %}">{{ 'layout.customer.log_in' | t }}</span>
        {%- if show_icons -%}
        <span class="inline-block w-6 h-6 align-middle">{%- render 'icon-account' -%}</span>
        {%- endif -%}
      </a>
    {% endif %}
  {% endif %}
{% endcapture %}

{% unless request.design_mode %}
  <script src="{{ 'header.js' | asset_url }}" type="module"></script>
{% endunless %}
<script src="{{ 'cart-count.js' | asset_url }}" type="module"></script>

<header
  class="
    site-header w-full text-scheme-text
    {% if enable_overlay %}
      absolute top-0 left-0 right-0 z-20 border-b-section bg-transparent
      {% unless section.settings.overlay_show_separator_border %}
        border-transparent
      {% else %}
        border-border
      {% endunless %}
    {% else %}
      relative bg-scheme-background text-scheme-text border-b-section border-border
    {% endif %}
    transition-[background-color,border-color] ease-in-out duration-200
    {% if layout contains 'navigation_center' %}
      lg:w-auto
    {% endif %}"
  role="banner"
  data-section-type="header"
  data-section-id="{{ section.id }}"
  x-data="ThemeSection_header({{ counter }})"
  x-init="mounted()"
  data-color-scheme="{{ color_scheme }}"
  {% if enable_overlay and change_color_scheme_when_overlaid_and_stuck %}
    :data-color-scheme="isStuck ? '{{ stuck_color_scheme }}' : '{{ color_scheme }}'"
  {% endif %}
  {% if section.settings.sticky_header %}
    data-sticky-header
    {% if enable_overlay and change_color_scheme_when_overlaid_and_stuck %}
      data-transparent-when-overlay-enabled-and-stuck
      :class="
      {
        'header-is-active' : menuIsActive,
        'bg-scheme-background': isStuck,
        'bg-transparent': !isStuck,
      }"
    {% else %}
    :class="
      {
        'header-is-active' : menuIsActive,
      }"
    {% endif %}
  {% else %}
    :class="{ 'header-is-active' : menuIsActive }"
  {% endif %}
>
  <div id="headerBorderWrap" class="headerBorderWrap">
    <div id="headerContainer"
          class="z-10">
      <div
        class="py-2 lg:py-0 px-section overflow-hidden">
        <div class="flex justify-between items-center">
          {% comment %} Left {% endcomment %}
          <div class="flex flex-grow {% unless layout contains 'search' %}w-1/3{% endunless %} {% if layout == 'logo_left_navigation_left' %}lg:w-2/3{% endif %} justify-start items-stretch">

            {% if layout contains 'logo_center' %}
              <div class="flex items-center z-10">{{ menu_icon }}</div>
            {% endif %}

            {% if layout contains 'logo_left' %}
              <div class="lg:flex-grow-1 {% if layout == 'logo_left_navigation_left' %}mr-5 lg:mr-10{% endif %}">
                {{ logo }}
              </div>
            {% endif %}
            {% if layout contains 'navigation_left' %}
              <div class="hidden lg:block">
                {{ navigation }}
              </div>
            {% endif %}
          </div>

          {% comment %} Center {% endcomment %}
          {% unless layout contains 'search' %}
            <div class="flex justify-center text-center {% if layout contains 'logo_center' %}flex-grow lg:flex-grow-0 lg:w-auto{% else %}w-0 flex-grow-0{% endif %} {% if layout contains 'navigation_center' %}lg:flex-grow {% unless has_feature_desktop_button and feature_desktop_link_position == 'right_of_cart' %}lg:w-3/4 xl:4/5{% else %}lg:w-1/3{% endunless %}{% endif %}">
              {% if layout contains 'logo_center' %}
                {{ logo }}
              {% endif %}
              {% if layout contains 'navigation_center' %}
                <div class="hidden lg:block">
                  {{ navigation }}
                </div>
              {% endif %}
            </div>
          {% endunless %}

          {% comment %} Right {% endcomment %}
          <div class="flex flex-grow w-1/3 items-center justify-end">
            {% if layout contains 'logo_left' %}
              <div class="lg:hidden mr-5">
                {{ menu_icon }}
              </div>
            {% endif %}

            {% if layout contains 'navigation_right' %}
              <div class="hidden lg:block ml-5 mr-10">
                {{ navigation }}
              </div>
            {% endif %}

            {% if section.settings.enable_social_icons_header %}
              <div class="mr-10 hidden lg:block  ">
                {% render 'social-icons', position: 'header' %}
              </div>
            {% endif %}

            <div class="hidden lg:block h-full">
              {{ accounts }}
            </div>

            {% unless section.settings.header_show_search == false %}
              <a data-open-search x-ref="search" @click.prevent="openSearch()" @keydown.space="openSearch()" href="{{ routes.search_url }}" class="{% if show_icons %}{{ icon_link_classes }}{% else %}hidden lg:block {{ link_classes }}{% endif %}">
                {% if show_icons %}<span class="inline-block w-6 h-6 fill-current align-middle">{%- render 'icon-search' -%}</span>{% endif %}
                <span class="visually-hidden">{{ 'general.search.title' | t }}</span>{% unless show_icons %}<span>{{ 'general.search.submit' | t }}</span>{% endunless %}
              </a>
              <div
                class="absolute top-0 left-0 right-0 bottom-0 w-full flex items-center bg-scheme-background text-scheme-text z-20 px-section"
                x-cloak
                x-show="searchOpen"
                x-transition:enter="transition ease duration-200"
                x-transition:enter-start="opacity-0"
                x-transition:enter-end="opacity-100"
                x-transition:leave="transition ease duration-00"
                x-transition:leave-start="opacity-100"
                x-transition:leave-end="opacity-0"
                @click.away.prevent="searchOpen = false"
                data-header-search
                >
                <div class="w-full" {% if predictive_search_enabled %}x-data='ThemeComponent_PredictiveSearch({{ search_resources | json }})' x-init="mounted()" @focusOut="onFocusOut" @keyup="onKeyup" @keydown="onKeydown" {% endif %}>
                  {{ search_form }}
                </div>
              </div>
            {% endunless %}

            <div class="flex items-center justify-end {% unless has_feature_desktop_button and feature_desktop_link_position == 'right_of_cart' %} -mr-2.5 {% endunless %} h-full">
              {{ cart_button }}
            </div>

            {% if has_feature_desktop_button and feature_desktop_link_position == 'right_of_cart' %}
            <div class="items-center relative z-10 hidden lg:flex py-2.5 ml-5">
              <div class="{% unless hide_button_shadow %}{% if settings.button_shadow_direction contains 'top' %}pt-button-shadow{% else %}pb-button-shadow{% endif %}{% endunless %}">
                {{ feature_desktop_link }}
              </div>
            </div>
            {% endif %}

          </div>
        </div>
      </div>
    </div>
  </div>
</header>
<noscript>
  <style>
    .no-js-focus-wrapper:focus-within > .no-js-focus-container {
      display: block !important;
    }
  </style>
</noscript>
{% if section.settings.sticky_header %}
  {% style %}
    #shopify-section-{{ section.id }} {
      position: sticky;
      top: 0;
      z-index: 40;
    }
  </style>
  {% endstyle %}
{% endif %}
{% if section.settings.logo != blank %}
  <style>
    .logo-image {
      display: block;
      max-width: {{ section.settings.logo_max_width }}px;
    }
  </style>
{% endif %}
{%- if enable_overlay -%}
  <script>
    document
      .getElementById('shopify-section-{{ section.id }}')
      .classList.add('has-no-height');
  </script>
  <style>
    #MainContent .shopify-section:first-child > section:not(.full-bleed-section) {
      padding-top: {{ section.settings.overlay_first_section_padding_top_mobile }}rem;
    }

    @media (min-width: 990px) {
      #MainContent .shopify-section:first-child > section:not(.full-bleed-section) {
        padding-top: {{ section.settings.overlay_first_section_padding_top_desktop }}rem;
      }
    }
  </style>
{%- endif -%}
{%- if predictive_search_enabled and request.design_mode == false -%}
  <script src="{{ 'modules-predictive-search.bundle.min.js' | asset_url }}" type="module"></script>
{%- endif -%}

{% comment %}theme-check-enable TemplateLength{% endcomment %}


<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": {{ shop.name | json }},
  {% if section.settings.logo %}
    {% assign image_size = section.settings.logo.width | append: 'x' %}
    "logo": {{ section.settings.logo | image_url: width: image_size | prepend: "https:" | json }},
  {% endif %}
  "sameAs": [
    {{ settings.social_facebook_url | json }},
    {{ settings.social_instagram_url | json }},
    {{ settings.social_twitter_url | json }},
    {{ settings.social_patreon_url | json }},
    {{ settings.social_pinterest_url | json }},
    {{ settings.social_soundcloud_url | json }},
    {{ settings.social_spotify_url | json }},
    {{ settings.social_bandcamp_url | json }},
    {{ settings.social_flickr_url | json }},
    {{ settings.social_vimeo_url | json }},
    {{ settings.social_apple_url | json }},
    {{ settings.social_lastfm_url | json }},
    {{ settings.social_youtube_url | json }},
    {{ settings.social_google_url | json }},
    {{ settings.social_tumblr_url | json }},
    {{ settings.social_triplej_url | json }},
    {{ settings.social_mixcloud_url | json }}
  ],
  "url": {{ shop.url | append: page.url | json }}
}
</script>

{% if request.page_type == 'index' %}
  {% assign potential_action_target = shop.url | append: routes.search_url | append: "?q={search_term_string}" %}
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebSite",
      "name": {{ shop.name | json }},
      "potentialAction": {
        "@type": "SearchAction",
        "target": {{ potential_action_target | json }},
        "query-input": "required name=search_term_string"
      },
      "url": {{ shop.url | append: page.url | json }}
    }
  </script>
{% endif %}


{% schema %}
{
  "name": "t:sections.header.name",
  "class": "section-site-header relative z-40",
  "settings": [
    {
      "type": "header",
      "content": "t:sections.header.settings.header_logo"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "t:common.settings.logo.label",
      "info": "t:common.settings.logo.info"
    },
    {
      "type": "range",
      "id": "logo_max_width",
      "min": 20,
      "max": 400,
      "step": 10,
      "unit": "px",
      "label": "t:sections.header.settings.logo_max_width.label",
      "default": 100
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header_menu"
    },
    {
      "type": "link_list",
      "id": "main_linklist",
      "label": "t:sections.header.settings.main_linklist.label",
      "default": "main-menu"
    },
    {
      "type": "checkbox",
      "id": "show_all_navigation_links",
      "label": "t:sections.header.settings.show_all_navigation_links.label"
    },
    {
      "type": "checkbox",
      "id": "showcase_second_level_links",
      "label": "t:sections.header.settings.showcase_second_level_links.label",
      "info": "t:sections.header.settings.showcase_second_level_links.info"
    },
    {
      "type": "checkbox",
      "id": "showcase_first_level_collections",
      "label": "t:sections.header.settings.showcase_first_level_collections.label",
      "info": "t:sections.header.settings.showcase_first_level_collections.info"
    },
    {
      "type": "checkbox",
      "id": "show_collection_images",
      "label": "t:sections.header.settings.show_collection_images.label",
      "info": "t:sections.header.settings.show_collection_images.info"
    },
    {
      "type": "select",
      "id": "crop",
      "label": "t:sections.header.settings.crop.label",
      "options": [
        {
          "value": "",
          "label": "t:common.options.no_crop.label"
        },
        {
          "value": "aspect-w-4 aspect-h-3",
          "label": "t:common.options.landscape.label"
        },
        {
          "value": "aspect-w-1 aspect-h-1",
          "label": "t:common.options.square.label"
        },
        {
          "value": "aspect-w-3 aspect-h-4",
          "label": "t:common.options.portrait.label"
        }
      ],
      "default": "aspect-w-1 aspect-h-1"
    },
    {
      "type": "header",
      "content": "t:common.settings.header_layout"
    },
    {
      "type": "select",
      "id": "header_layout",
      "label": "t:sections.header.settings.header_layout.label",
      "options": [
        {
          "value": "menu_icon_logo_center",
          "label": "t:sections.header.settings.header_layout.options.menu_icon_left_logo_center.label"
        },
        {
          "value": "navigation_left_logo_center",
          "label": "t:sections.header.settings.header_layout.options.navigation_left_logo_center.label"
        },
        {
          "value": "logo_left_navigation_center",
          "label": "t:sections.header.settings.header_layout.options.logo_left_navigation_center.label"
        }
      ],
      "default": "navigation_left_logo_center"
    },
    {
      "type": "checkbox",
      "id": "header_show_search",
      "label": "t:sections.header.settings.header_show_search.label"
    },
    {
      "type": "checkbox",
      "id": "sticky_header",
      "label": "t:sections.header.settings.sticky_header.label"
    },
    {
      "type": "checkbox",
      "id": "show_icons",
      "label": "t:sections.header.settings.show_icons.label"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header_overlay_settings"
    },
    {
      "type": "checkbox",
      "id": "enable_overlay_on_homepage",
      "label": "t:sections.header.settings.enable_overlay_on_homepage.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_overlay_on_collection_pages",
      "label": "t:sections.header.settings.enable_overlay_on_collection_pages.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_overlay_on_product_pages",
      "label": "t:sections.header.settings.enable_overlay_on_product_pages.label",
      "default": false
    },
    {
      "type": "select",
      "id": "overlay_text_color",
      "label": "t:sections.header.settings.overlay_text_color.label",
      "options": [
        {
          "value": "same_as_section",
          "label": "t:common.options.same_as_section.label"
        },
        {
          "value": "white",
          "label": "t:common.options.white.label"
        },
        {
          "value": "black",
          "label": "t:common.options.black.label"
        }
      ],
      "default": "white"
    },
    {
      "type": "image_picker",
      "id": "overlay_logo",
      "label": "t:sections.header.settings.overlay_logo.label"
    },
    {
      "type": "checkbox",
      "id": "transparent_when_overlaid_and_stuck",
      "label": "t:sections.header.settings.transparent_when_overlaid_and_stuck.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "overlay_show_separator_border",
      "label": "t:sections.header.settings.overlay_show_separator_border.label",
      "info": "t:sections.header.settings.overlay_show_separator_border.info"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header_overlay_compensation",
      "info": "Adjust the padding above the first section when overlay header is enabled."
    },
    {
      "type": "range",
      "id": "overlay_first_section_padding_top_desktop",
      "label": "t:sections.header.settings.overlay_first_section_padding_top_desktop.label",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "rem",
      "default": 3
    },
    {
      "type": "range",
      "id": "overlay_first_section_padding_top_mobile",
      "label": "t:sections.header.settings.overlay_first_section_padding_top_mobile.label",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "rem",
      "default": 3
    },
    {
      "type": "header",
      "content": "t:common.settings.header_color"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "t:sections.header.settings.color_scheme.label",
      "info": "t:sections.header.settings.color_scheme.info",
      "options": [
        {
          "value": "primary",
          "label": "t:common.options.primary.label"
        },
        {
          "value": "secondary",
          "label": "t:common.options.secondary.label"
        },
        {
          "value": "tertiary",
          "label": "t:common.options.tertiary.label"
        },
        {
          "value": "quaternary",
          "label": "t:common.options.quaternary.label"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "use_gradient_background",
      "label": "t:common.settings.use_gradient_background.label"
    },
    {
      "type": "select",
      "id": "dropdown_bg",
      "label": "t:sections.header.settings.dropdown_bg.label",
      "options": [
        {
          "value": "card",
          "label": "t:common.options.card.label"
        },
        {
          "value": "text",
          "label": "t:common.options.text.label"
        },
        {
          "value": "accent-1",
          "label": "t:common.options.accent_1.label"
        },
        {
          "value": "accent-2",
          "label": "t:common.options.accent_2.label"
        }
      ],
      "default": "card"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.header_sidebar_menu"
    },
    {
      "type": "checkbox",
      "id": "sidebar_show_footer_menu",
      "label": "t:sections.header.settings.sidebar_show_footer_menu.label"
    },
    {
      "type": "checkbox",
      "id": "sidebar_show_social_icons",
      "label": "t:sections.header.settings.sidebar_show_social_icons.label"
    }
  ],
  "blocks": [
    {
      "type": "feature_desktop_link",
      "limit": 1,
      "name": "t:sections.header.blocks.feature_desktop_link.name",
      "settings": [
        {
          "type": "url",
          "id": "button_link",
          "label": "t:common.settings.button_link.label"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "t:common.settings.button_label.label",
          "default": "Shop Now"
        },
        {
          "type": "radio",
          "id": "position",
          "label": "t:sections.header.blocks.feature_desktop_link.settings.position.label",
          "options": [
            {
              "value": "first_item_in_navigation",
              "label": "t:sections.header.blocks.feature_desktop_link.settings.position.options.first_item_in_navigation.label"
            },
            {
              "value": "right_of_cart",
              "label": "t:sections.header.blocks.feature_desktop_link.settings.position.options.right_of_cart.label"
            }
          ],
          "default": "first_item_in_navigation"
        },
        {
          "type": "checkbox",
          "id": "hide_button_shadow",
          "label": "t:sections.header.blocks.feature_desktop_link.settings.hide_button_shadow.label"
        }
      ]
    }
  ]
}
{% endschema %}
